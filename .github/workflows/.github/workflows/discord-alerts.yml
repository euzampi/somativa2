name: Discord Alerts

on:
  push:
    branches: [ "main" ]  # Dispara em commits diretos na main
  pull_request:
    types: [closed]       # Dispara quando uma PR Ã© fechada (mergeada)

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true || github.ref == 'refs/heads/main'
    steps:
      - name: Enviar notificaÃ§Ã£o para o Discord
        uses: Ilshidur/action-discord@v1
        with:
          args: "ðŸš€ **Nova atualizaÃ§Ã£o no repositÃ³rio!**\n\nðŸ“Œ **Branch:** ${{ github.ref }}\nðŸ’» **Autor:** ${{ github.actor }}\nðŸ”— **Commit:** ${{ github.event.head_commit.message }}\nðŸ“„ **Detalhes:** ${{ github.event.head_commit.url }}"
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
